{% extends "layout.html" %}

{% block main %}
<form action="{{ url_for('message.add_message') }}" method="post" class="card border-secondary mb-3" data-test="send-form">
  <fieldset>
    <legend class="card-header h5 border-secondary bg-dark text-light">üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ</legend>
    <div class="card-body">
      <!--<div class="mb-3" data-test="send-alert">-->
      <!--  <div class="alert alert-warning">–ó–∞–≥—Ä—É–∑–∫–∞...</div>-->
      <!--</div>-->

      {% if error %}
        <div class="mb-3" data-test="send-alert">
          <div class="alert alert-danger">{{ error }}</div>
        </div>
      {% endif %}

      {% if new_message %}
        <div class="mb-3" data-test="send-alert">
          <div class="alert alert-success">–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>
        </div>
      {% endif %}

      <div class="mb-3">
        <label for="sender" class="form-label">–û—Ç –∫–æ–≥–æ:</label>
        <input id="sender" name="sender" value="{{ request.form['sender'] }}" class="form-control" type="text" placeholder="–ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è" />
      </div>
      <div class="mb-3">
        <label for="message" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
        <textarea id="message" name="message" class="form-control" placeholder="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è">{{ request.form['message'] }}</textarea>
      </div>
      <div class="d-flex">
        <button class="btn btn-outline-success ms-auto">‚úèÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </fieldset>
</form>

<ul class="list-unstyled">
  {% for message in messages %}
    <li class="mb-3">
      {% include 'message.html' %}
    </li>
  {% endfor %}
</ul>
{% endblock %}